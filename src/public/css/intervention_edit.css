:root{
    --gap:12px; --r:8px;
    --bg:#f4f5f7; --panel:#fff; --ink:#222; --mut:#666; --line:#d6d9df; --head:#e9f2ff;

    /* Variantes boutons affectation */
    --acc-green-bg:#e9f8ef; --acc-green-brd:#0d6b2d; --acc-green-fg:#0d6b2d; --acc-green-hov:#ffffff;
    --acc-amber-bg:#fff5dc; --acc-amber-brd:#e6b34e; --acc-amber-fg:#7a5400; --acc-amber-hov:#ffecc2;
    --acc-blue-bg:#e9f2ff;  --acc-blue-brd:#7aa7ff; --acc-blue-fg:#214c9c; --acc-blue-hov:#dbe9ff;
}

*{ box-sizing:border-box }
html,body{ height:100% }
body{ margin:0; background:var(--bg); color:var(--ink); font:14px/1.4 system-ui, Segoe UI, Arial }

/* ===== Layout ===== */
.app{
    width:100%; max-width:1320px; margin:0 auto; padding:12px;
    display:grid; gap:var(--gap);
    /* → droite plus large */
    grid-template-columns:minmax(360px,42%) minmax(360px,58%);
    min-height:100dvh; align-items:stretch;
}
.col{ min-height:0; display:flex; flex-direction:column; gap:var(--gap) }

/* ===== Card ===== */
.box{
    background:var(--panel); border:1px solid var(--line); border-radius:var(--r);
    display:flex; flex-direction:column; min-height:0;
}
.box .head{
    display:flex; justify-content:space-between; align-items:center; gap:8px;
    padding:6px 8px; background:var(--head); border-bottom:1px solid var(--line);
    border-top-left-radius:var(--r); border-top-right-radius:var(--r);
}
.box .body{ padding:8px; display:flex; flex-direction:column; gap:8px; min-height:0 }

/* ===== Table (checklists, etc.) ===== */
.table{ margin:0 } /* pas de scroll sur traitement/affectation */
table{ width:100%; border-collapse:collapse; font-size:13px }
th,td{ padding:5px 6px; border-bottom:1px solid var(--line); text-align:left; vertical-align:top }
th{ background:#f7faff; position:sticky; top:0; z-index:1 }
td.status{ text-align:center; width:66px }
.status input{ transform:scale(1.05) }
.note{ color:var(--mut); font-size:12px }

/* ===== Fields (Objet / Contact réel / etc.) ===== */
.gridObj{ display:grid; grid-template-columns:120px 1fr; gap:6px; align-items:center }
.grid2{   display:grid; grid-template-columns:120px 1fr; gap:6px; align-items:center }
.gridRow{ display:grid; grid-template-columns:120px 1fr 110px 1fr; gap:6px; align-items:center }

input,select,textarea{
    width:100%; padding:6px 7px;
    border:1px solid var(--line); border-radius:6px; background:#fff; line-height:1.2;
}
.ro{
    padding:6px 7px;
    border:1px dashed var(--line); border-radius:6px; background:#f9fafb;
    user-select:text; cursor:default; white-space:normal; overflow:hidden;
}

/* ===== Affectation : haut centré & tassé ===== */
.right .affectationSticky{
    position:sticky; top:12px; z-index:3; background:var(--panel);
    padding-bottom:6px; border-bottom:1px solid var(--line);
    display:flex; flex-direction:column; align-items:center; gap:6px;
}
.right .affectationSticky .grid2,
.right .affectationSticky .gridRow{
    margin:4px auto; max-width:560px;
}
.right .affectationSticky .grid2{  grid-template-columns:120px minmax(0,360px) }
.right .affectationSticky .gridRow{ grid-template-columns:120px minmax(0,200px) 110px minmax(0,160px) }
.right .affectationSticky #selAny{ max-width:360px }
.right .affectationSticky #dtPrev{ max-width:200px }
.right .affectationSticky #tmPrev{ max-width:160px }
.affectationSticky thead{ display:none }

/* ===== Agenda (seul qui scroll) ===== */
.agendaBox{
    display:flex; flex-direction:column;
    overflow:auto; max-height:60vh;
}
.agendaBox .head{ position:sticky; top:0; z-index:2; background:var(--head); padding:6px 8px }
.agendaBox .body{ padding:8px; gap:8px }
.agendaBox .grid2{ grid-template-columns:96px 1fr; gap:6px }

.cal-grid{ display:grid; grid-template-columns:repeat(7,1fr); gap:4px }
.cal-weekday{ text-align:center; font-size:11px; color:var(--mut) }
.cal-cell{
    border:1px solid var(--line); border-radius:6px; background:#fff;
    min-height:34px; padding:4px; font-size:11px;
    display:flex; align-items:flex-start; justify-content:flex-end; position:relative; cursor:pointer; user-select:none;
}
.cal-cell .d{ font-variant-numeric:tabular-nums }
.cal-cell.muted{ opacity:.55 }
.cal-cell:hover{ outline:2px solid #cfe0ff }
.cal-cell .dot{
    position:absolute; left:6px; bottom:6px; width:8px; height:8px; border-radius:999px; border:1px solid rgba(0,0,0,.05);
}
#calWrap.collapsed #calGrid{ display:none }

#calHead{ display:flex; align-items:center; gap:8px; justify-content:space-between }
#calHeadMid{ display:flex; align-items:center; gap:8px }
#calTitle{ font-weight:600 }
#calPrev,#calNext,#calToggle{ padding:4px 8px }
#calListHead{ display:flex; align-items:center; justify-content:space-between; margin:6px 0 }
#dayNext{ padding:2px 8px }
#calListTitle{ margin:4px 0; font-size:12.5px }
#calList .table thead th, #calList .table td{ padding:6px }

/* Lignes de liste jour : RDV temporaires (non validés) */
.cal-list tr.temporaire { background: #fff7e6; }     /* orange pâle */
.cal-list tr.temporaire td { border-color: #ffe2ba; }
/* tu peux aussi styliser un badge si tu en ajoutes un plus tard */


/* ===== Boutons (base compacte) ===== */
.btn{
    border:1px solid var(--line); background:#eef3ff;
    padding:5px 10px; border-radius:6px; cursor:pointer; line-height:1.1; font-size:13px;
    transition:background-color .15s ease, border-color .15s ease, color .15s ease, box-shadow .15s ease, transform .02s ease;
}
.btn:hover{ background:#dde9ff; border-color:#b9c8e6 }
.btn:active{ transform:translateY(1px) }
.btn:focus-visible{ outline:2px solid #cfe0ff; outline-offset:2px; box-shadow:0 0 0 3px rgba(131,170,255,.35) }

/* --- utilitaires --- */
.btn-sm{ font-size:12px; padding:4px 9px; line-height:1.1 }
.btn-block{ display:block; width:100% }

/* --- Bouton Historique (plein largeur, un poil plus visible) --- */
.btn-history{
    background:#f2f7ff;
    border-color:#a7bce8;
    color:#214c9c;
    font-weight:600;
    margin:6px 0 8px;
}
.btn-history:hover{
    background:#e6f0ff;
    border-color:#92ace4;
}

/* --- Boutons d’action (classes dédiées) --- */
.btn-validate{
    background:var(--acc-green-bg);
    border-color:var(--acc-green-brd);
    color:var(--acc-green-fg);
    font-weight:600;
}
.btn-validate:hover{
    background:var(--acc-green-hov);
    border-color:#0a4c2d;
    color:#0a4c2d;
}

/* RDV (ambre) */
.btn-plan-rdv{
    background:var(--acc-amber-bg);
    border-color:var(--acc-amber-brd);
    color:var(--acc-amber-fg);
}
.btn-plan-rdv:hover{
    background:var(--acc-amber-hov);
    border-color:#d6a139;
    color:#5e4300;
}

/* Nouvel appel (bleu) */
.btn-plan-call{
    background:var(--acc-blue-bg);
    border-color:var(--acc-blue-brd);
    color:var(--acc-blue-fg);
}
.btn-plan-call:hover{
    background:var(--acc-blue-hov);
    border-color:#5f97ff;
    color:#163c84;
}



/* ===== Réduire la hauteur de “Commentaire” et “Traitement” ===== */
/* Proposition A (activée) : pas de scroll interne, boîtes non extensibles */
.center .box:first-of-type,        /* Traitement du dossier (1ère box colonne centre) */
.center .mserv{                    /* Commentaire */
    flex:0 0 auto;                   /* ne pas prendre la hauteur dispo */
}
.center .mserv .body input#commentaire{ height:34px } /* juste la zone d’écriture */



/* ===== Utils ===== */
.mt6{ margin-top:6px } .mt8{ margin-top:8px }
.hstack-8{ display:flex; gap:8px; align-items:center }
.hstack-6{ display:flex; gap:6px; align-items:center }
.ml-auto{ margin-left:auto }
.is-hidden{ display:none !important }
.w-150{ width:150px } .w-66{ width:66px } .w-80{ width:80px } .w-200{ width:200px }

/* ===== Modal ===== */
#infoModal{ display:none; position:fixed; inset:0; z-index:2147483647; background:rgba(0,0,0,.45) }
#infoModal.is-open{ display:grid; place-items:center }
#infoModal .modal-content{
    position:relative; background:#fff; width:min(640px,92vw); max-height:84vh; overflow:auto;
    border-radius:8px; padding:16px 18px; box-shadow:0 20px 60px rgba(0,0,0,.25);
}
#infoModal .close{
    position:absolute; top:8px; right:10px; border:0; background:transparent;
    font-size:22px; line-height:1; color:#666; cursor:pointer;
}
#infoModal .close:hover{ color:#000 }

/* ===== Icons ===== */
.col-icon{ width:28px; text-align:center; border-left:1px solid var(--line) }
.icon-btn{
    display:inline-flex; align-items:center; justify-content:center;
    width:18px; height:18px; border:1px solid var(--line); border-radius:50%;
    background:#fff; font-size:11px; line-height:1; color:#555; cursor:pointer;
}
.icon-btn:focus{ outline:2px solid #cfe0ff; outline-offset:1px }

/* Ligne Date/Heure : centrée et un peu plus large */
.right .affectationSticky .gridRow--dt{
    grid-template-columns: 110px minmax(0, 280px) 80px minmax(0, 220px);
    /* + de place qu'avant (560px) */
    max-width: 720px;
    margin: 6px auto;              /* centre la grille */
    align-items: center;
}
/* Retire les anciennes limites étroites si présentes */
.right .affectationSticky #dtPrev,
.right .affectationSticky #tmPrev{
    max-width: none;
    width: 100%;
}

.badge{
    display:inline-block; padding:2px 6px; border-radius:999px;
    font-size:11px; line-height:1.2; border:1px solid var(--line);
}
.badge-temp{ background:#fff5dc; border-color:#e6b34e; color:#7a5400; }
.badge-valid{ background:#e9f8ef; border-color:#0d6b2d; color:#0d6b2d; }

.badge-obj{
    display:inline-block; padding:2px 6px; border-radius:999px;
    font-size:11px; line-height:1.2; border:1px solid var(--line);
    background:#eef3ff; color:#214c9c; border-color:#a7bce8;
    text-transform: none;
}
.mutsep{ color:#999; margin:0 4px; }

.chips-wrap{ display:flex; flex-wrap:wrap; gap:6px; }
.chip{
    display:inline-block; padding:3px 8px; border-radius:999px;
    font-size:12px; line-height:1.1; border:1px solid var(--line);
    white-space:nowrap;
}
.chip-green{ background:#e9f8ef; border-color:#0d6b2d; color:#0d6b2d; }
.chip-amber{ background:#fff5dc; border-color:#e6b34e; color:#7a5400; }

.badge-call{
    background:#e9f2ff; border-color:#7aa7ff; color:#214c9c;
}



/* ===== Responsive ===== */
@media (max-width:767px){
    .app{ grid-template-columns:1fr }
}
