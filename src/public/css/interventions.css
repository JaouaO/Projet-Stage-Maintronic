:root{
    --W:1280px; --pad:12px; --gap:10px;
    --bg:#f6f7fb; --panel:#ffffff; --ink:#1f2430; --mut:#657089; --line:#d9deea; --head:#e9f2ff;

    /* tags de base */
    --tag-blue:#e8f1ff;   --tag-blue-ink:#143b7a;
    --tag-amber:#fff5dc;  --tag-amber-ink:#7a5400;
    --tag-coral:#ffe3e6;  --tag-coral-ink:#7a1d27;
    --tag-green:#e7fbef;  --tag-green-ink:#0d6b2d;
    --tag-violet:#efe7ff; --tag-violet-ink:#3d227e;
    --tag-teal:#e6fbf7;   --tag-teal-ink:#0b5a52;
    --tag-lilac:#f4e9ff;  --tag-lilac-ink:#5b3296;
    --tag-sky:#e7f3ff;    --tag-sky-ink:#0f4b8f;
    --tag-sun:#fff0b3;    --tag-sun-ink:#6a4a00;
}

/* base/layout */
*{box-sizing:border-box}
html,body{height:auto}
body{margin:0;background:var(--bg);color:var(--ink);font:13.5px/1.4 Inter,system-ui,Segoe UI;overflow:auto}
.app{width:100%;max-width:var(--W);margin:0 auto;padding:var(--pad);display:grid;gap:var(--gap);grid-template-rows:auto auto auto}
.header{display:flex;justify-content:space-between;align-items:center}
h1{margin:0;font-size:18px}

/* card */
.card{background:var(--panel);border:1px solid var(--line);border-radius:10px;display:flex;flex-direction:column;min-height:0}
.cardHead{display:flex;justify-content:space-between;align-items:center;padding:8px 10px;border-bottom:1px solid var(--line);background:var(--head)}
.cardBody{padding:8px;display:block}

/* table */
.tableArea{overflow:visible;border:1px solid var(--line);border-radius:8px;background:#fff}
.table{width:100%;border-collapse:collapse;table-layout:fixed;font-size:13px}
.table thead th{position:sticky;top:0;z-index:1;background:#f7faff;border-bottom:1px solid var(--line);padding:8px;color:#2a3142;cursor:pointer;user-select:none}
.table tbody td{border-bottom:1px solid var(--line);padding:8px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.table tbody tr:nth-child(even){background:#fbfcff}
.table th.sort-asc::after{content:" ▲";font-size:12px}
.table th.sort-desc::after{content:" ▼";font-size:12px}

/* colonnes */
th.col-id, td.col-id{text-align:left}
th.col-client, td.col-client{text-align:left}
th.col-date, td.col-date{text-align:center;font-variant-numeric:tabular-nums}
th.col-heure, td.col-heure{text-align:center;font-variant-numeric:tabular-nums}
th.col-todo, td.col-todo{text-align:left}
th.col-flags, td.col-flags{text-align:left}
th.col-actions, td.col-actions{text-align:left}

/* toolbar/boutons */
.toolbar{display:flex;justify-content:flex-end;align-items:center;margin:8px 0}
.toolbar label{margin-right:8px}
.btn{border:1px solid var(--line);background:#eef3ff;padding:6px 10px;border-radius:8px;font-size:12.5px;text-decoration:none;color:inherit;cursor:pointer}
.btn:hover{background:#e8f1ff}
.btn-light{background:#fff;border-color:#d9deea}
.btn-light:hover{background:#f7faff}
.icon-toggle{display:inline-flex;align-items:center;justify-content:center;width:24px;height:24px;border:1px solid var(--line);border-radius:6px;background:#fff;cursor:pointer;line-height:1;font-size:14px}
.icon-toggle:hover{background:#f7faff}

/* clic ligne */
tr[data-href]{cursor:pointer}
tr[data-href]:hover{background:#eef3ff}

/* pager */
.pager{margin-top:10px}
.pager nav{display:flex;justify-content:center;margin-top:12px}
.pager ul{list-style:none;margin:0;padding:0;display:flex;gap:6px}
.pager li a, .pager li span{display:inline-block;min-width:34px;padding:6px 10px;text-align:center;border:1px solid #e5e7eb;border-radius:6px;background:#fff;color:#1f2430;text-decoration:none;font-size:13px}
.pager li span[aria-current="page"]{background:#e8f1ff;border-color:#cfe0ff;font-weight:600}
.pager li a:hover{background:#f7faff}
.pager li.disabled span{opacity:.5}

/* badges */
.badge{display:inline-block;padding:3px 8px;border-radius:999px;font-size:12px;line-height:1.1;border:1px solid var(--line);font-weight:700;letter-spacing:.2px}
.badge-urgent{background:var(--tag-coral);color:var(--tag-coral-ink);border-color:#ffc2c8}
.badge-me{background:var(--tag-blue);color:var(--tag-blue-ink);border-color:#cfe0ff}

/* flags cell no-ellipsis + wrap */
td.col-flags{white-space:normal;overflow:visible}
td.col-flags .flags{display:flex;flex-wrap:wrap;gap:6px;align-items:center}

/* liseré + teinte douce */
.row-urgent-me{box-shadow:inset 3px 0 #ff7a86}
.row-urgent{box-shadow:inset 2px 0 #ffabb4}
.row-me{box-shadow:inset 2px 0 #9fc4ff}
.row-urgent-me::before,.row-urgent::before,.row-me::before{content:none!important;display:none!important}

.tint-urgent{background:rgba(255,122,134,.08)}
.tint-me{background:rgba(159,196,255,.10)}

/* “À faire” */
.tag{display:inline-block;padding:4px 8px;border-radius:999px;border:1px solid var(--line);font-weight:600;font-size:12px}
.todo-tags{display:inline-flex;flex-wrap:wrap;gap:6px;align-items:center}
.col-todo{overflow:visible}
.tag.combo{display:inline-block;max-width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;background:#f3f4f6;color:#374151;border-color:#e5e7eb}

/* palette arc-en-ciel douce + RDV_CONFIRME en vert validé */
.tag.t-RDV_A_FIXER{background:var(--tag-amber);color:var(--tag-amber-ink);border-color:#ffe1a3}
.tag.t-CLIENT_A_RECONTACTER{background:var(--tag-sky);color:var(--tag-sky-ink);border-color:#cfe3ff}
.tag.t-COMMANDE_PIECES{background:var(--tag-violet);color:var(--tag-violet-ink);border-color:#dacfff}
.tag.t-SUIVI_ESCALADE{background:var(--tag-teal);color:var(--tag-teal-ink);border-color:#b6efe6}
.tag.t-CONFIRMER_CONTACT{background:#e9f2ff;color:#214c9c;border-color:#cfe0ff}
.tag.t-DIAGNOSTIC_A_REALISER{background:var(--tag-lilac);color:var(--tag-lilac-ink);border-color:#e2ccff}
.tag.t-VERIFIER_DISPO_PIECE{background:var(--tag-sun);color:var(--tag-sun-ink);border-color:#ffd98c}
.tag.t-RDV_CONFIRME{background:var(--tag-green);color:var(--tag-green-ink);border-color:#bcefd1}
.tag.t-OTHER{background:#f3f4f6;color:#374151;border-color:#e5e7eb}

/* actions cell layout */
.col-actions .actions{display:flex;align-items:center;gap:8px;justify-content:flex-end}

/* accordéon */
.row-detail[hidden]{display:none}
.detail-cell{background:#fbfcff;border-top:1px solid #eef2f7}
.detail-wrap{display:grid;grid-template-columns:repeat(2,minmax(260px,1fr));gap:8px 16px;padding:10px 8px;font-size:12.5px}
.detail-wrap .full{grid-column:1 / -1}
@media (max-width: 900px){ .detail-wrap{grid-template-columns:1fr} }
